---
// Services Gallery Section with custom animated icons

// Main quarterly service
const mainService = {
  id: "quarterly",
  href: "#quarterly",
  badges: ["Best Value", "Most Popular"],
  title: "Quarterly Property Documentation",
  priceHouse: 100,
  priceApartment: 70,
  priceFormatted: "$100 / $70",
  priceNote: "house / apartment",
  description: "We check what matters: air filters, appliance interiors, leaks, water damage, and any visible issues. Photos delivered in a PDF report same day.",
  cta: "Add to Cart",
  type: "subscription"
};

// What's included in quarterly plan
const includedServices = [
  {
    id: "interior",
    href: "#interior",
    title: "Visible Damage Check",
    description: "We look for broken windows, damaged walls, ceiling stains, and any visible issues that need your attention. Problems are photographed and documented.",
    valueProposition: {
      headline: "Catch Problems Before They Escalate",
      benefits: [
        "Small issues become expensive repairs when left unchecked",
        "Documented proof of property condition at each visit",
        "Clear evidence for security deposit decisions",
        "Early detection of tenant neglect or misuse"
      ],
      statistic: "Unreported damage costs landlords an average of $3,000+ per incident"
    }
  },
  {
    id: "hvac",
    href: "#hvac",
    title: "Air Filter Inspection",
    description: "We check if air filters are being changed regularly. Dirty filters are photographed so you can follow up with tenants about proper maintenance.",
    valueProposition: {
      headline: "Protect Your HVAC Investment",
      benefits: [
        "Dirty filters increase energy bills by up to 15%",
        "Clogged filters can cut HVAC lifespan in half",
        "Photo evidence helps enforce lease maintenance terms",
        "Prevents costly emergency HVAC repairs"
      ],
      statistic: "HVAC replacement costs $5,000-$10,000 on average"
    }
  },
  {
    id: "plumbing",
    href: "#plumbing",
    title: "Leak & Water Damage Check",
    description: "We look under sinks, around toilets, and near water heaters for leaks or water damage. Early detection helps prevent costly repairs.",
    valueProposition: {
      headline: "Stop Water Damage Before It Spreads",
      benefits: [
        "Water damage leads to mold within 24-48 hours",
        "We check hidden areas tenants often overlook",
        "Quarterly checks catch slow leaks early",
        "Prevents structural damage and health hazards"
      ],
      statistic: "Water damage is the #2 most common homeowner insurance claim"
    }
  },
  {
    id: "appliances",
    href: "#appliances",
    title: "Appliance Interior Photos",
    description: "We photograph inside the oven, dishwasher, refrigerator, and other appliances to verify tenants are maintaining them properly.",
    valueProposition: {
      headline: "Hold Tenants Accountable for Appliance Care",
      benefits: [
        "Interior photos reveal true maintenance habits",
        "Clear evidence for security deposit deductions",
        "Track appliance condition over time",
        "Distinguish abuse from normal wear and tear"
      ],
      statistic: "Appliance replacements cost $400-$2,500 each"
    }
  },
  {
    id: "exterior",
    href: "#exterior",
    title: "Exterior Walk-Around",
    description: "Quick exterior check for obvious issues like damaged siding, broken fixtures, or yard concerns that may need attention.",
    valueProposition: {
      headline: "Monitor Curb Appeal & Structural Issues",
      benefits: [
        "Document landscaping and yard maintenance compliance",
        "Catch weather-related damage early",
        "Track seasonal wear on exterior elements",
        "Maintain property value and neighborhood standards"
      ],
      statistic: "Exterior neglect can reduce property value by 5-10%"
    }
  },
  {
    id: "report",
    href: "#report",
    title: "Same-Day PDF Reports",
    description: "All photos and findings delivered in an organized PDF report the same day of the visit. Easy to review and share with tenants if needed.",
    valueProposition: {
      headline: "Professional Documentation When You Need It",
      benefits: [
        "Reports delivered same day—no waiting",
        "Organized sections for easy review",
        "Shareable with property managers or attorneys",
        "Timestamped photos for legal protection"
      ],
      statistic: "Each report contains 50+ timestamped photos"
    }
  }
];

---

<section id="gallery" class="gallery-section">
  <!-- What's Included Section -->
  <header class="gallery-head included-header">
    <p class="eyebrow">Our Service</p>
    <h2>What's Included in Every Documentation</h2>
    <p>Everything you need to protect your investment—delivered every 3 months with same-day reports.</p>
  </header>

  <div class="photo-grid">
    {includedServices.map(service => (
      <div class="photo-item-wrapper" data-service={service.id}>
        <button
          class="photo-item"
          data-service-toggle={service.id}
          aria-expanded="false"
          aria-controls={`value-prop-${service.id}`}
          aria-label={`Learn more about ${service.title}`}
        >
          <!-- Animated icon backgrounds -->
          <div class="animated-bg" role="img" aria-label={`${service.title} icon`}>
            {service.id === 'interior' && (
              <div class="icon-interior">
                <div class="room-walls"></div>
                <div class="room-floor"></div>
                <div class="door-frame-small"></div>
                <div class="window-frame"></div>
                <div class="damage-marker wall-crack"></div>
                <div class="damage-marker floor-stain"></div>
                <div class="inspection-beam"></div>
              </div>
            )}

            {service.id === 'exterior' && (
              <div class="icon-exterior">
                <div class="house-exterior"></div>
                <div class="house-roof-ext"></div>
                <div class="foundation"></div>
                <div class="siding-panel" style="animation-delay: 0s;"></div>
                <div class="siding-panel" style="animation-delay: 0.3s;"></div>
                <div class="siding-panel" style="animation-delay: 0.6s;"></div>
                <div class="damage-indicator ext-crack"></div>
                <div class="inspection-light"></div>
              </div>
            )}

            {service.id === 'hvac' && (
              <div class="icon-hvac">
                <div class="hvac-unit"></div>
                <div class="fan-blade blade-1"></div>
                <div class="fan-blade blade-2"></div>
                <div class="fan-blade blade-3"></div>
                <div class="fan-blade blade-4"></div>
                <div class="air-particle" style="animation-delay: 0s;"></div>
                <div class="air-particle" style="animation-delay: 0.3s;"></div>
                <div class="air-particle" style="animation-delay: 0.6s;"></div>
                <div class="air-particle" style="animation-delay: 0.9s;"></div>
              </div>
            )}

            {service.id === 'plumbing' && (
              <div class="icon-plumbing">
                <div class="pipe-vertical"></div>
                <div class="pipe-horizontal"></div>
                <div class="pipe-elbow"></div>
                <div class="faucet-base"></div>
                <div class="faucet-spout"></div>
                <div class="faucet-handle"></div>
                <div class="water-drop" style="animation-delay: 0s;"></div>
                <div class="water-drop" style="animation-delay: 0.6s;"></div>
                <div class="water-drop" style="animation-delay: 1.2s;"></div>
                <div class="water-flow"></div>
                <div class="leak-indicator"></div>
              </div>
            )}

            {service.id === 'appliances' && (
              <div class="icon-appliances">
                <div class="oven-body"></div>
                <div class="oven-door"></div>
                <div class="oven-window"></div>
                <div class="oven-handle"></div>
                <div class="heat-wave" style="animation-delay: 0s;"></div>
                <div class="heat-wave" style="animation-delay: 0.3s;"></div>
                <div class="heat-wave" style="animation-delay: 0.6s;"></div>
                <div class="temp-indicator"></div>
              </div>
            )}

            {service.id === 'report' && (
              <div class="icon-report">
                <div class="report-page"></div>
                <div class="report-header"></div>
                <div class="report-line line-1"></div>
                <div class="report-line line-2"></div>
                <div class="report-line line-3"></div>
                <div class="report-photo"></div>
                <div class="report-checkmark"></div>
              </div>
            )}
          </div>

          <div class="photo-label">
            <h3>{service.title}</h3>
            <p>{service.description}</p>
            <span class="expand-indicator">
              <span class="expand-text">Learn More</span>
              <svg class="expand-chevron" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </span>
          </div>
        </button>

        <!-- Expanded Value Proposition Panel -->
        <div
          class="value-prop-panel"
          id={`value-prop-${service.id}`}
          hidden
          aria-hidden="true"
        >
          <div class="value-prop-content">
            <h4 class="value-prop-headline">{service.valueProposition.headline}</h4>

            <ul class="value-prop-benefits">
              {service.valueProposition.benefits.map(benefit => (
                <li>
                  <svg class="benefit-check" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                  {benefit}
                </li>
              ))}
            </ul>

            {service.valueProposition.statistic && (
              <div class="value-prop-stat">
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 3v18h18"/>
                  <path d="M18 9l-5 5-4-4-4 4"/>
                </svg>
                <span class="stat-text">{service.valueProposition.statistic}</span>
              </div>
            )}
          </div>
        </div>
      </div>
    ))}
  </div>

</section>

<style>
  .gallery-section {
    padding: 8rem 3rem;
    max-width: 1400px;
    margin: 0 auto;
    scroll-margin-top: -100px;
  }

  .gallery-head {
    text-align: center;
    margin-bottom: 4rem;
  }

  .included-header {
    margin-top: 0;
    margin-bottom: 4rem;
  }

  .addon-header {
    margin-top: 6rem;
    margin-bottom: 3rem;
  }

  .eyebrow {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: rgba(255, 255, 255, 0.5);
    margin-bottom: 1rem;
    font-weight: 600;
  }

  body.light-mode .eyebrow {
    color: #666666;
  }

  .gallery-head h2 {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 700;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #ffffff 0%, #94a3b8 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  body.light-mode .gallery-head h2 {
    background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .gallery-head p {
    font-size: 1.15rem;
    color: rgba(255, 255, 255, 0.7);
    max-width: 700px;
    margin: 0 auto;
  }

  body.light-mode .gallery-head p {
    color: #4a4a4a;
  }

  /* Main Featured Service Card */
  .main-service-card {
    max-width: 900px;
    margin: 0 auto 4rem;
  }

  .service-card.featured {
    position: relative;
    border-radius: 24px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.3);
    min-height: 550px;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    display: block;
  }

  body.light-mode .service-card.featured {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.15);
  }

  .service-card.featured:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 60px rgba(231, 76, 60, 0.3);
  }

  body.light-mode .service-card.featured:hover {
    box-shadow: 0 20px 60px rgba(231, 76, 60, 0.2);
  }

  .service-card.featured .photo-label {
    padding: 3rem;
  }

  .photo-label.featured-label {
    padding-top: 55% !important;
  }

  .pricing-header {
    margin-bottom: 1.5rem;
  }

  .price-tag {
    display: inline-block;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(231, 76, 60, 0.4);
  }

  .price-amount {
    display: block;
    font-size: 2.5rem;
    font-weight: 700;
    color: white;
    line-height: 1;
    margin-bottom: 0.25rem;
  }

  .price-note {
    display: block;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
  }

  .included-items {
    margin: 2rem 0 1.5rem;
    padding: 1.5rem;
    background: rgba(100, 116, 139, 0.1);
    border-radius: 12px;
    border-left: 4px solid #e74c3c;
  }

  body.light-mode .included-items {
    background: rgba(100, 116, 139, 0.08);
  }

  .included-label {
    font-weight: 700;
    font-size: 1rem;
    color: #e74c3c;
    margin-bottom: 1rem;
  }

  .included-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .included-list li {
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: 0.75rem;
    padding-left: 1.5rem;
    position: relative;
  }

  body.light-mode .included-list li {
    color: rgba(0, 0, 0, 0.7);
  }

  .included-list li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: #e74c3c;
    font-weight: 700;
  }

  .included-list li:last-child {
    margin-bottom: 0;
  }

  /* Add-On Services Grid */
  .photo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    gap: 2rem;
  }

  .photo-item {
    position: relative;
    border-radius: 24px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    min-height: 450px;
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  }

  body.light-mode .photo-item {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
  }

  @media (hover: hover) {
    .photo-item:hover {
      transform: translateY(-12px);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
    }

    body.light-mode .photo-item:hover {
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
    }
  }

  .animated-bg {
    width: 100%;
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(
      ellipse at 50% 50%,
      rgba(100, 116, 139, 0.1) 0%,
      transparent 70%
    );
    pointer-events: none;
    z-index: 1;
    min-height: 270px;
  }

  body.light-mode .animated-bg {
    background: radial-gradient(
      ellipse at 50% 50%,
      rgba(100, 116, 139, 0.05) 0%,
      transparent 70%
    );
  }

  .animated-bg.featured-bg {
    height: 45%;
    top: 0;
    align-items: flex-start;
    padding-top: 2rem;
  }

  .card-badges {
    position: absolute;
    top: 1.5rem;
    left: 1.5rem;
    z-index: 20;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .chip {
    background: rgba(255, 255, 255, 0.95);
    color: #1a1a1a;
    padding: 0.4rem 0.9rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }

  body.light-mode .chip {
    background: rgba(0, 0, 0, 0.85);
    color: #ffffff;
  }

  .photo-label {
    position: relative;
    padding: 2rem;
    background: linear-gradient(
      to top,
      rgba(0, 0, 0, 0.95) 0%,
      rgba(0, 0, 0, 0.85) 50%,
      transparent 100%
    );
    color: white;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10;
    flex-shrink: 0;
  }

  body.light-mode .photo-label {
    background: linear-gradient(
      to top,
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0.85) 50%,
      transparent 100%
    );
    color: #1a1a1a;
  }

  .photo-label h3 {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
  }

  .photo-label p {
    font-size: 0.95rem;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: 1rem;
  }

  body.light-mode .photo-label p {
    color: rgba(0, 0, 0, 0.7);
  }

  .card-cta {
    display: inline-flex;
    align-items: center;
    color: #e74c3c;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s;
  }

  .card-cta::after {
    content: '→';
    margin-left: 0.5rem;
    transition: transform 0.3s;
  }

  .photo-item:hover .card-cta::after {
    transform: translateX(5px);
  }

  .card-cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 10px;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
    margin-top: 0.5rem;
  }

  .card-cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
  }

  .card-cta-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
  }

  .price-chip {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
    font-weight: 700;
  }

  /* ====== Interior Damage Assessment Animation ====== */
  .icon-interior {
    position: relative;
    width: 220px;
    height: 200px;
  }

  .room-walls {
    position: absolute;
    width: 180px;
    height: 160px;
    top: 20px;
    left: 20px;
    background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
    border-radius: 8px;
    box-shadow: inset 0 4px 20px rgba(0, 0, 0, 0.4);
  }

  body.light-mode .room-walls {
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
  }

  .room-floor {
    position: absolute;
    width: 180px;
    height: 40px;
    bottom: 20px;
    left: 20px;
    background: linear-gradient(180deg, rgba(100, 116, 139, 0.3), rgba(100, 116, 139, 0.5));
    border-radius: 0 0 8px 8px;
  }

  .door-frame-small {
    position: absolute;
    width: 30px;
    height: 60px;
    top: 80px;
    left: 30px;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .door-frame-small {
    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
  }

  .window-frame {
    position: absolute;
    width: 50px;
    height: 50px;
    top: 40px;
    right: 40px;
    background: rgba(100, 181, 246, 0.2);
    border: 3px solid #475569;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  body.light-mode .window-frame {
    background: rgba(100, 181, 246, 0.15);
    border-color: #94a3b8;
  }

  .window-frame::before,
  .window-frame::after {
    content: '';
    position: absolute;
    background: #475569;
  }

  .window-frame::before {
    width: 100%;
    height: 2px;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }

  .window-frame::after {
    width: 2px;
    height: 100%;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  .damage-marker {
    position: absolute;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b);
    border-radius: 50%;
    animation: damageAlert 2s ease-in-out infinite;
    box-shadow: 0 0 12px rgba(231, 76, 60, 0.6);
  }

  .damage-marker.wall-crack {
    top: 60px;
    left: 80px;
  }

  .damage-marker.floor-stain {
    bottom: 40px;
    right: 60px;
    animation-delay: 1s;
  }

  @keyframes damageAlert {
    0%, 100% {
      transform: scale(1);
      opacity: 0.6;
    }
    50% {
      transform: scale(1.3);
      opacity: 1;
      box-shadow: 0 0 20px rgba(231, 76, 60, 0.9);
    }
  }

  .inspection-beam {
    position: absolute;
    width: 120px;
    height: 3px;
    top: 100px;
    left: 50px;
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(100, 181, 246, 0.8) 50%,
      transparent 100%
    );
    animation: beamScan 3s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(100, 181, 246, 0.6);
  }

  @keyframes beamScan {
    0%, 100% {
      opacity: 0;
      transform: translateY(-40px);
    }
    50% {
      opacity: 1;
      transform: translateY(40px);
    }
  }

  /* ====== Exterior Damage Assessment Animation ====== */
  .icon-exterior {
    position: relative;
    width: 200px;
    height: 200px;
  }

  .house-exterior {
    position: absolute;
    width: 140px;
    height: 100px;
    bottom: 40px;
    left: 30px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 8px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .house-exterior {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .house-roof-ext {
    position: absolute;
    width: 0;
    height: 0;
    bottom: 140px;
    left: 30px;
    border-left: 70px solid transparent;
    border-right: 70px solid transparent;
    border-bottom: 50px solid #475569;
  }

  body.light-mode .house-roof-ext {
    border-bottom-color: #94a3b8;
  }

  .foundation {
    position: absolute;
    width: 140px;
    height: 20px;
    bottom: 20px;
    left: 30px;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-radius: 0 0 8px 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  body.light-mode .foundation {
    background: linear-gradient(135deg, #64748b 0%, #475569 100%);
  }

  .siding-panel {
    position: absolute;
    width: 120px;
    height: 3px;
    left: 40px;
    background: rgba(100, 116, 139, 0.4);
    border-radius: 2px;
    animation: sidingCheck 3s ease-in-out infinite;
  }

  .siding-panel:nth-child(4) { bottom: 110px; }
  .siding-panel:nth-child(5) { bottom: 90px; }
  .siding-panel:nth-child(6) { bottom: 70px; }

  @keyframes sidingCheck {
    0%, 100% {
      opacity: 0.4;
      transform: scaleX(1);
    }
    50% {
      opacity: 1;
      transform: scaleX(1.05);
      background: rgba(100, 181, 246, 0.6);
    }
  }

  .damage-indicator.ext-crack {
    position: absolute;
    width: 12px;
    height: 12px;
    bottom: 80px;
    left: 80px;
    background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b);
    border-radius: 50%;
    animation: damageAlert 2.5s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
  }

  .inspection-light {
    position: absolute;
    width: 80px;
    height: 80px;
    top: 60px;
    left: 60px;
    background: radial-gradient(circle,
      rgba(100, 181, 246, 0.2) 0%,
      transparent 70%
    );
    border-radius: 50%;
    animation: lightSweep 4s ease-in-out infinite;
  }

  @keyframes lightSweep {
    0%, 100% {
      transform: scale(0.8);
      opacity: 0.3;
    }
    50% {
      transform: scale(1.2);
      opacity: 0.7;
    }
  }

  /* ====== Move-In Animation ====== */
  .icon-move-in {
    position: relative;
    width: 200px;
    height: 250px;
  }

  .door-frame {
    position: absolute;
    width: 140px;
    height: 200px;
    top: 25px;
    left: 30px;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .door-frame {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .door-panel {
    position: absolute;
    width: 120px;
    height: 180px;
    top: 35px;
    left: 40px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 6px;
    transform-origin: left center;
    animation: doorOpen 4.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .door-panel {
    background: linear-gradient(135deg, #64748b 0%, #475569 100%);
  }

  @keyframes doorOpen {
    0%, 35% {
      transform: perspective(600px) rotateY(0deg);
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    45%, 85% {
      transform: perspective(600px) rotateY(-75deg);
      box-shadow: inset -20px 2px 30px rgba(0, 0, 0, 0.5);
    }
    100% {
      transform: perspective(600px) rotateY(0deg);
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
    }
  }

  .door-handle {
    position: absolute;
    width: 14px;
    height: 14px;
    top: 125px;
    left: 140px;
    background: radial-gradient(circle at 30% 30%, #ff6b6b, #e74c3c);
    border-radius: 50%;
    box-shadow: 0 2px 12px rgba(231, 76, 60, 0.8), inset -2px -2px 4px rgba(0, 0, 0, 0.3);
    animation: handleMove 4.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes handleMove {
    0%, 35% {
      transform: perspective(600px) rotateY(0deg) translateX(0);
      opacity: 1;
    }
    45%, 85% {
      transform: perspective(600px) rotateY(-75deg) translateX(-20px);
      opacity: 0.7;
    }
    100% {
      transform: perspective(600px) rotateY(0deg) translateX(0);
      opacity: 1;
    }
  }

  .checklist-item {
    position: absolute;
    width: 45px;
    height: 9px;
    right: 20px;
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.5), rgba(100, 116, 139, 0.3));
    border-radius: 4px;
    opacity: 0;
    animation: checklistAppear 4.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  body.light-mode .checklist-item {
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.7), rgba(100, 116, 139, 0.5));
  }

  .checklist-item:nth-child(4) { top: 80px; }
  .checklist-item:nth-child(5) { top: 100px; }
  .checklist-item:nth-child(6) { top: 120px; }

  .checklist-item::before {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    left: -14px;
    top: 0.5px;
    background: radial-gradient(circle at 30% 30%, #ff6b6b, #e74c3c);
    border-radius: 2px;
    box-shadow: 0 2px 6px rgba(231, 76, 60, 0.5);
    animation: checkPop 4.5s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
  }

  @keyframes checklistAppear {
    0%, 43% {
      opacity: 0;
      transform: translateX(-15px) scale(0.8);
    }
    48% {
      opacity: 1;
      transform: translateX(0) scale(1.05);
    }
    52%, 83% {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
    88%, 100% {
      opacity: 0;
      transform: translateX(5px) scale(0.9);
    }
  }

  @keyframes checkPop {
    0%, 43% {
      transform: scale(0);
    }
    50% {
      transform: scale(1.2);
    }
    52%, 100% {
      transform: scale(1);
    }
  }

  /* ====== Move-Out Animation ====== */
  .icon-move-out {
    position: relative;
    width: 240px;
    height: 200px;
  }

  .comparison-panel {
    position: absolute;
    width: 100px;
    height: 140px;
    top: 30px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .comparison-panel {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .comparison-panel.left {
    left: 10px;
    animation: slideCompareLeft 4s ease-in-out infinite;
  }

  .comparison-panel.right {
    right: 10px;
    animation: slideCompareRight 4s ease-in-out infinite;
  }

  @keyframes slideCompareLeft {
    0%, 30% {
      transform: translateX(0) scale(1);
      opacity: 1;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }
    45%, 55% {
      transform: translateX(20px) scale(0.95);
      opacity: 0.5;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    70%, 100% {
      transform: translateX(0) scale(1);
      opacity: 1;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }
  }

  @keyframes slideCompareRight {
    0%, 30% {
      transform: translateX(0) scale(1);
      opacity: 1;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }
    45%, 55% {
      transform: translateX(-20px) scale(0.95);
      opacity: 0.5;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    70%, 100% {
      transform: translateX(0) scale(1);
      opacity: 1;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }
  }

  .comparison-panel::after {
    content: '';
    position: absolute;
    width: 60%;
    height: 4px;
    top: 30%;
    left: 20%;
    background: linear-gradient(90deg, rgba(100, 116, 139, 0.5), rgba(100, 116, 139, 0.3));
    border-radius: 3px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .comparison-panel::before {
    content: '';
    position: absolute;
    width: 70%;
    height: 4px;
    top: 45%;
    left: 15%;
    background: linear-gradient(90deg, rgba(100, 116, 139, 0.5), rgba(100, 116, 139, 0.3));
    border-radius: 3px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .compare-arrow {
    position: absolute;
    width: 50px;
    height: 5px;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(90deg, #e74c3c 0%, #ff6b6b 50%, #e74c3c 100%);
    border-radius: 3px;
    animation: arrowPulse 5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    box-shadow: 0 2px 12px rgba(231, 76, 60, 0.6);
  }

  .compare-arrow::after {
    content: '';
    position: absolute;
    right: -8px;
    top: -4px;
    width: 0;
    height: 0;
    border-left: 12px solid #ff6b6b;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
  }

  .compare-arrow::before {
    content: '';
    position: absolute;
    left: -8px;
    top: -4px;
    width: 0;
    height: 0;
    border-right: 12px solid #e74c3c;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
  }

  @keyframes arrowPulse {
    0%, 30% {
      opacity: 0.4;
      transform: translateX(-50%) scale(0.9);
    }
    45%, 55% {
      opacity: 1;
      transform: translateX(-50%) scale(1.15);
      box-shadow: 0 4px 20px rgba(231, 76, 60, 0.8);
    }
    70%, 100% {
      opacity: 0.4;
      transform: translateX(-50%) scale(0.9);
    }
  }

  /* ====== Buyer's Inspection Animation ====== */
  .icon-buyers {
    position: relative;
    width: 220px;
    height: 220px;
  }

  .house-outline {
    position: absolute;
    width: 120px;
    height: 90px;
    top: 70px;
    left: 50px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .house-outline {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .house-outline::before {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    top: -40px;
    left: -10px;
    border-left: 70px solid transparent;
    border-right: 70px solid transparent;
    border-bottom: 50px solid #34495e;
  }

  body.light-mode .house-outline::before {
    border-bottom-color: #94a3b8;
  }

  .magnifying-glass {
    position: absolute;
    animation: magnifyMove 6s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
    filter: drop-shadow(0 4px 12px rgba(231, 76, 60, 0.3));
  }

  @keyframes magnifyMove {
    0% {
      top: 40px;
      left: 30px;
      transform: scale(1) rotate(0deg);
    }
    20% {
      top: 50px;
      left: 70px;
      transform: scale(1.1) rotate(-5deg);
    }
    40% {
      top: 90px;
      left: 110px;
      transform: scale(0.95) rotate(5deg);
    }
    60% {
      top: 110px;
      left: 130px;
      transform: scale(1.05) rotate(-3deg);
    }
    80% {
      top: 70px;
      left: 70px;
      transform: scale(1) rotate(2deg);
    }
    100% {
      top: 40px;
      left: 30px;
      transform: scale(1) rotate(0deg);
    }
  }

  .mag-lens {
    width: 65px;
    height: 65px;
    border: 5px solid #e74c3c;
    border-radius: 50%;
    background: radial-gradient(
      circle at 30% 30%,
      rgba(255, 255, 255, 0.3),
      rgba(231, 76, 60, 0.15) 40%,
      rgba(231, 76, 60, 0.05) 100%
    );
    box-shadow: 0 6px 20px rgba(231, 76, 60, 0.5),
                inset -3px -3px 10px rgba(0, 0, 0, 0.2),
                inset 3px 3px 10px rgba(255, 255, 255, 0.1);
    position: relative;
    animation: lensPulse 3s ease-in-out infinite;
  }

  @keyframes lensPulse {
    0%, 100% {
      border-color: #e74c3c;
      box-shadow: 0 6px 20px rgba(231, 76, 60, 0.5),
                  inset -3px -3px 10px rgba(0, 0, 0, 0.2),
                  inset 3px 3px 10px rgba(255, 255, 255, 0.1);
    }
    50% {
      border-color: #ff6b6b;
      box-shadow: 0 8px 30px rgba(231, 76, 60, 0.8),
                  inset -3px -3px 10px rgba(0, 0, 0, 0.2),
                  inset 3px 3px 10px rgba(255, 255, 255, 0.1);
    }
  }

  .mag-handle {
    position: absolute;
    width: 7px;
    height: 45px;
    background: linear-gradient(180deg, #e74c3c 0%, #c0392b 80%, #922b21 100%);
    border-radius: 4px;
    top: 52px;
    left: 50px;
    transform: rotate(45deg);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4),
                inset -1px -1px 3px rgba(0, 0, 0, 0.3),
                inset 1px 1px 2px rgba(255, 107, 107, 0.5);
  }

  /* ====== Quarterly Maintenance Animation ====== */
  .icon-quarterly {
    position: relative;
    width: 180px;
    height: 200px;
  }

  .calendar-frame {
    position: absolute;
    width: 160px;
    height: 180px;
    top: 10px;
    left: 10px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .calendar-frame {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .calendar-header {
    position: absolute;
    width: 140px;
    height: 30px;
    top: 20px;
    left: 20px;
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
  }

  .quarter-marker {
    position: absolute;
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.4), rgba(100, 116, 139, 0.2));
    border: 3px solid #64748b;
    border-radius: 8px;
    animation: quarterPulse 8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
  }

  body.light-mode .quarter-marker {
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.3), rgba(100, 116, 139, 0.15));
    border-color: #475569;
  }

  .quarter-marker.q1 {
    top: 70px;
    left: 25px;
    animation-delay: 0s;
  }

  .quarter-marker.q2 {
    top: 70px;
    right: 25px;
    animation-delay: 2s;
  }

  .quarter-marker.q3 {
    bottom: 30px;
    left: 25px;
    animation-delay: 4s;
  }

  .quarter-marker.q4 {
    bottom: 30px;
    right: 25px;
    animation-delay: 6s;
  }

  .quarter-marker::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    background: rgba(100, 116, 139, 0.4);
    border-radius: 3px;
  }

  @keyframes quarterPulse {
    0%, 22% {
      background: linear-gradient(135deg, rgba(100, 116, 139, 0.4), rgba(100, 116, 139, 0.2));
      border-color: #64748b;
      transform: scale(1) rotate(0deg);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    3% {
      transform: scale(1.08) rotate(-5deg);
    }
    6% {
      transform: scale(1.15) rotate(3deg);
    }
    9% {
      transform: scale(1.08) rotate(-2deg);
    }
    12% {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.8), rgba(231, 76, 60, 0.6));
      border-color: #ff6b6b;
      transform: scale(1.2) rotate(0deg);
      box-shadow: 0 6px 30px rgba(231, 76, 60, 0.8),
                  0 0 40px rgba(231, 76, 60, 0.5);
    }
    18% {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.6), rgba(231, 76, 60, 0.4));
      border-color: #e74c3c;
      transform: scale(1.05) rotate(0deg);
    }
    100% {
      background: linear-gradient(135deg, rgba(100, 116, 139, 0.4), rgba(100, 116, 139, 0.2));
      border-color: #64748b;
      transform: scale(1) rotate(0deg);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
  }

  body.light-mode .quarter-marker {
    animation: quarterPulseLight 8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes quarterPulseLight {
    0%, 22% {
      background: linear-gradient(135deg, rgba(100, 116, 139, 0.3), rgba(100, 116, 139, 0.15));
      border-color: #475569;
      transform: scale(1) rotate(0deg);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    3% {
      transform: scale(1.08) rotate(-5deg);
    }
    6% {
      transform: scale(1.15) rotate(3deg);
    }
    9% {
      transform: scale(1.08) rotate(-2deg);
    }
    12% {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.6), rgba(231, 76, 60, 0.4));
      border-color: #ff6b6b;
      transform: scale(1.2) rotate(0deg);
      box-shadow: 0 6px 25px rgba(231, 76, 60, 0.6),
                  0 0 35px rgba(231, 76, 60, 0.4);
    }
    18% {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.4), rgba(231, 76, 60, 0.2));
      border-color: #e74c3c;
      transform: scale(1.05) rotate(0deg);
    }
    100% {
      background: linear-gradient(135deg, rgba(100, 116, 139, 0.3), rgba(100, 116, 139, 0.15));
      border-color: #475569;
      transform: scale(1) rotate(0deg);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
  }

  /* ====== HVAC System Animation ====== */
  .icon-hvac {
    position: relative;
    width: 200px;
    height: 200px;
  }

  .hvac-unit {
    position: absolute;
    width: 120px;
    height: 140px;
    top: 30px;
    left: 40px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .hvac-unit {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .hvac-unit::before {
    content: '';
    position: absolute;
    width: 100px;
    height: 100px;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid rgba(100, 116, 139, 0.5);
    border-radius: 50%;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  .hvac-unit::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b);
    border-radius: 50%;
    box-shadow: 0 2px 10px rgba(231, 76, 60, 0.6),
                inset -2px -2px 6px rgba(0, 0, 0, 0.4);
  }

  .fan-blade {
    position: absolute;
    width: 60px;
    height: 12px;
    top: 50%;
    left: 50%;
    margin-top: -6px;
    background: linear-gradient(90deg,
      rgba(231, 76, 60, 0.2) 0%,
      #e74c3c 30%,
      #c0392b 70%,
      rgba(192, 57, 43, 0.2) 100%
    );
    border-radius: 5px;
    transform-origin: center;
    animation: fanRotate 1.5s linear infinite;
    box-shadow: 0 3px 12px rgba(231, 76, 60, 0.5);
    filter: blur(0.3px);
  }

  .fan-blade.blade-1 { transform: translateX(-50%) rotate(0deg); animation-delay: 0s; }
  .fan-blade.blade-2 { transform: translateX(-50%) rotate(90deg); animation-delay: -0.375s; }
  .fan-blade.blade-3 { transform: translateX(-50%) rotate(180deg); animation-delay: -0.75s; }
  .fan-blade.blade-4 { transform: translateX(-50%) rotate(270deg); animation-delay: -1.125s; }

  @keyframes fanRotate {
    0% {
      transform: translateX(-50%) rotate(0deg);
      opacity: 0.8;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateX(-50%) rotate(360deg);
      opacity: 0.8;
    }
  }

  .air-particle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: radial-gradient(circle at 30% 30%,
      rgba(100, 116, 139, 0.8),
      rgba(100, 116, 139, 0.4)
    );
    border-radius: 50%;
    animation: airFlow 2.5s ease-out infinite;
    box-shadow: 0 2px 8px rgba(100, 116, 139, 0.3);
  }

  body.light-mode .air-particle {
    background: radial-gradient(circle at 30% 30%,
      rgba(100, 116, 139, 0.6),
      rgba(100, 116, 139, 0.3)
    );
  }

  .air-particle:nth-child(6) { left: 160px; top: 55px; animation-delay: 0s; }
  .air-particle:nth-child(7) { left: 165px; top: 75px; animation-delay: 0.4s; }
  .air-particle:nth-child(8) { left: 160px; top: 95px; animation-delay: 0.8s; }
  .air-particle:nth-child(9) { left: 165px; top: 115px; animation-delay: 1.2s; }

  @keyframes airFlow {
    0% {
      opacity: 0;
      transform: translateX(0) scale(0.3);
    }
    15% {
      opacity: 0.8;
      transform: translateX(5px) scale(0.6);
    }
    40% {
      opacity: 1;
      transform: translateX(15px) scale(1);
    }
    70% {
      opacity: 0.6;
      transform: translateX(30px) scale(1.3);
    }
    100% {
      opacity: 0;
      transform: translateX(45px) scale(1.5);
    }
  }

  /* ====== Roof & Exterior Animation ====== */
  .icon-roof {
    position: relative;
    width: 200px;
    height: 220px;
  }

  .house-base {
    position: absolute;
    width: 140px;
    height: 100px;
    bottom: 30px;
    left: 30px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 0 0 8px 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .house-base {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .roof-section {
    position: absolute;
    width: 0;
    height: 0;
    bottom: 130px;
    border-bottom: 70px solid #475569;
  }

  body.light-mode .roof-section {
    border-bottom-color: #94a3b8;
  }

  .roof-section.left {
    left: 30px;
    border-left: 0 solid transparent;
    border-right: 80px solid transparent;
  }

  .roof-section.right {
    right: 30px;
    border-right: 0 solid transparent;
    border-left: 80px solid transparent;
  }

  .roof-highlight {
    position: absolute;
    width: 140px;
    height: 10px;
    bottom: 130px;
    left: 30px;
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(231, 76, 60, 0.2) 20%,
      rgba(231, 76, 60, 0.9) 50%,
      rgba(231, 76, 60, 0.2) 80%,
      transparent 100%
    );
    border-radius: 5px;
    animation: roofScan 4s ease-in-out infinite;
    box-shadow: 0 0 30px rgba(231, 76, 60, 0.7),
                0 2px 15px rgba(231, 76, 60, 0.5);
    filter: blur(1px);
  }

  @keyframes roofScan {
    0%, 100% {
      opacity: 0;
      transform: scaleX(0.2) translateX(-20px);
      filter: blur(2px);
    }
    15% {
      opacity: 0.5;
      transform: scaleX(0.6) translateX(-5px);
      filter: blur(1px);
    }
    50% {
      opacity: 1;
      transform: scaleX(1) translateX(0);
      filter: blur(0.5px);
      box-shadow: 0 0 40px rgba(231, 76, 60, 0.9),
                  0 2px 20px rgba(231, 76, 60, 0.7);
    }
    85% {
      opacity: 0.5;
      transform: scaleX(0.6) translateX(5px);
      filter: blur(1px);
    }
  }

  .rain-drop {
    position: absolute;
    width: 3px;
    height: 16px;
    background: linear-gradient(180deg,
      rgba(100, 116, 139, 0.9) 0%,
      rgba(100, 116, 139, 0.6) 40%,
      rgba(100, 116, 139, 0.2) 80%,
      transparent 100%
    );
    border-radius: 3px 3px 50% 50%;
    animation: rainFall 1.8s ease-in infinite;
    box-shadow: 0 2px 4px rgba(100, 116, 139, 0.3);
  }

  body.light-mode .rain-drop {
    background: linear-gradient(180deg,
      rgba(71, 85, 105, 0.7) 0%,
      rgba(71, 85, 105, 0.5) 40%,
      rgba(71, 85, 105, 0.2) 80%,
      transparent 100%
    );
  }

  .rain-drop:nth-child(6) { left: 45px; top: 20px; animation-delay: 0s; }
  .rain-drop:nth-child(7) { left: 75px; top: 10px; animation-delay: 0.25s; }
  .rain-drop:nth-child(8) { left: 105px; top: 5px; animation-delay: 0.5s; }
  .rain-drop:nth-child(9) { left: 135px; top: 15px; animation-delay: 0.75s; }
  .rain-drop:nth-child(10) { left: 165px; top: 25px; animation-delay: 1s; }

  .rain-drop::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 2px;
    background: radial-gradient(ellipse,
      rgba(100, 116, 139, 0.4) 0%,
      transparent 70%
    );
    border-radius: 50%;
    opacity: 0;
    animation: splash 1.8s ease-in infinite;
    animation-delay: inherit;
  }

  @keyframes rainFall {
    0% {
      opacity: 0;
      transform: translateY(0) scaleY(0.8);
    }
    5% {
      opacity: 1;
      transform: translateY(5px) scaleY(1);
    }
    85% {
      opacity: 0.7;
      transform: translateY(140px) scaleY(1.1);
    }
    100% {
      opacity: 0;
      transform: translateY(155px) scaleY(0.5);
    }
  }

  @keyframes splash {
    0%, 85% {
      opacity: 0;
      transform: translateX(-50%) scale(0);
    }
    90% {
      opacity: 0.6;
      transform: translateX(-50%) scale(1.5);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) scale(2);
    }
  }

  /* ====== Plumbing System Animation ====== */
  .icon-plumbing {
    position: relative;
    width: 220px;
    height: 220px;
  }

  .pipe-vertical {
    position: absolute;
    width: 18px;
    height: 120px;
    top: 20px;
    left: 50px;
    background: linear-gradient(90deg, #475569 0%, #334155 50%, #475569 100%);
    border-radius: 3px;
    box-shadow: inset -2px 0 8px rgba(0, 0, 0, 0.4),
                inset 2px 0 8px rgba(255, 255, 255, 0.1),
                0 4px 12px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .pipe-vertical {
    background: linear-gradient(90deg, #94a3b8 0%, #cbd5e1 50%, #94a3b8 100%);
  }

  .pipe-horizontal {
    position: absolute;
    width: 100px;
    height: 18px;
    top: 131px;
    left: 50px;
    background: linear-gradient(180deg, #475569 0%, #334155 50%, #475569 100%);
    border-radius: 3px;
    box-shadow: inset 0 -2px 8px rgba(0, 0, 0, 0.4),
                inset 0 2px 8px rgba(255, 255, 255, 0.1),
                0 4px 12px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .pipe-horizontal {
    background: linear-gradient(180deg, #94a3b8 0%, #cbd5e1 50%, #94a3b8 100%);
  }

  .pipe-elbow {
    position: absolute;
    width: 24px;
    height: 24px;
    top: 128px;
    left: 47px;
    background: radial-gradient(circle at 30% 30%, #64748b, #475569);
    border-radius: 50%;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4),
                inset -2px -2px 6px rgba(0, 0, 0, 0.3),
                inset 2px 2px 6px rgba(255, 255, 255, 0.1);
  }

  body.light-mode .pipe-elbow {
    background: radial-gradient(circle at 30% 30%, #cbd5e1, #94a3b8);
  }

  .faucet-base {
    position: absolute;
    width: 35px;
    height: 50px;
    top: 100px;
    left: 140px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 8px 8px 4px 4px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3),
                inset -3px -3px 8px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .faucet-base {
    background: linear-gradient(135deg, #94a3b8 0%, #cbd5e1 100%);
  }

  .faucet-spout {
    position: absolute;
    width: 40px;
    height: 12px;
    top: 140px;
    left: 135px;
    background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
    border-radius: 0 0 6px 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .faucet-spout {
    background: linear-gradient(180deg, #94a3b8 0%, #cbd5e1 100%);
  }

  .faucet-spout::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    background: #1e293b;
    border-radius: 50%;
  }

  .faucet-handle {
    position: absolute;
    width: 20px;
    height: 8px;
    top: 105px;
    left: 147px;
    background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b);
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.5);
    animation: handleTurn 3s ease-in-out infinite;
    transform-origin: center;
  }

  @keyframes handleTurn {
    0%, 30% {
      transform: rotate(0deg);
    }
    40%, 90% {
      transform: rotate(-90deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  .water-drop {
    position: absolute;
    width: 6px;
    height: 8px;
    left: 157px;
    top: 152px;
    background: radial-gradient(circle at 30% 30%,
      rgba(100, 181, 246, 0.9),
      rgba(66, 165, 245, 0.7)
    );
    border-radius: 50% 50% 50% 0;
    transform: rotate(45deg);
    opacity: 0;
    animation: waterDrip 1.8s ease-in infinite;
    box-shadow: 0 2px 6px rgba(66, 165, 245, 0.4);
  }

  body.light-mode .water-drop {
    background: radial-gradient(circle at 30% 30%,
      rgba(66, 165, 245, 0.8),
      rgba(33, 150, 243, 0.6)
    );
  }

  @keyframes waterDrip {
    0%, 38% {
      opacity: 0;
      top: 152px;
      transform: rotate(45deg) scale(0.5);
    }
    40% {
      opacity: 1;
      top: 156px;
      transform: rotate(45deg) scale(1);
    }
    85% {
      opacity: 0.7;
      top: 200px;
      transform: rotate(45deg) scale(1.2);
    }
    100% {
      opacity: 0;
      top: 210px;
      transform: rotate(45deg) scale(0.8);
    }
  }

  .water-flow {
    position: absolute;
    width: 3px;
    height: 0;
    left: 158.5px;
    top: 152px;
    background: linear-gradient(180deg,
      rgba(100, 181, 246, 0.7) 0%,
      rgba(66, 165, 245, 0.5) 50%,
      rgba(100, 181, 246, 0.3) 100%
    );
    border-radius: 2px;
    animation: waterFlow 3s ease-in-out infinite;
    box-shadow: 0 0 8px rgba(66, 165, 245, 0.5);
  }

  @keyframes waterFlow {
    0%, 38% {
      height: 0;
      opacity: 0;
    }
    42%, 88% {
      height: 50px;
      opacity: 1;
    }
    100% {
      height: 0;
      opacity: 0;
    }
  }

  .leak-indicator {
    position: absolute;
    width: 12px;
    height: 12px;
    top: 75px;
    left: 54px;
    background: radial-gradient(circle at 30% 30%,
      rgba(231, 76, 60, 0.8),
      rgba(231, 76, 60, 0.4)
    );
    border-radius: 50%;
    animation: leakPulse 2s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(231, 76, 60, 0.6);
  }

  @keyframes leakPulse {
    0%, 100% {
      transform: scale(0.8);
      opacity: 0.4;
    }
    50% {
      transform: scale(1.2);
      opacity: 1;
      box-shadow: 0 0 25px rgba(231, 76, 60, 0.8);
    }
  }

  .leak-indicator::after {
    content: '';
    position: absolute;
    width: 4px;
    height: 6px;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    background: radial-gradient(circle at 30% 30%,
      rgba(100, 181, 246, 0.8),
      rgba(66, 165, 245, 0.5)
    );
    border-radius: 50% 50% 50% 0;
    animation: leakDrip 2s ease-in infinite;
  }

  @keyframes leakDrip {
    0%, 100% {
      opacity: 0;
      transform: translateX(-50%) translateY(0) scale(0.5);
    }
    20% {
      opacity: 1;
      transform: translateX(-50%) translateY(2px) scale(1);
    }
    80% {
      opacity: 0.5;
      transform: translateX(-50%) translateY(20px) scale(1.2);
    }
  }

  /* ====== Appliance Assessments Animation ====== */
  .icon-appliances {
    position: relative;
    width: 200px;
    height: 200px;
  }

  .oven-body {
    position: absolute;
    width: 140px;
    height: 160px;
    top: 20px;
    left: 30px;
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  body.light-mode .oven-body {
    background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .oven-door {
    position: absolute;
    width: 120px;
    height: 100px;
    bottom: 30px;
    left: 40px;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    border-radius: 8px;
    box-shadow: inset 0 4px 15px rgba(0, 0, 0, 0.3),
                0 4px 12px rgba(0, 0, 0, 0.2);
  }

  body.light-mode .oven-door {
    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
  }

  .oven-window {
    position: absolute;
    width: 90px;
    height: 60px;
    bottom: 50px;
    left: 55px;
    background: radial-gradient(
      ellipse at 50% 50%,
      rgba(255, 152, 0, 0.3) 0%,
      rgba(255, 87, 34, 0.2) 30%,
      rgba(0, 0, 0, 0.6) 70%
    );
    border: 3px solid #1e293b;
    border-radius: 6px;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);
    animation: ovenGlow 3s ease-in-out infinite;
  }

  body.light-mode .oven-window {
    border-color: #475569;
  }

  @keyframes ovenGlow {
    0%, 100% {
      background: radial-gradient(
        ellipse at 50% 50%,
        rgba(255, 152, 0, 0.2) 0%,
        rgba(255, 87, 34, 0.1) 30%,
        rgba(0, 0, 0, 0.6) 70%
      );
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);
    }
    50% {
      background: radial-gradient(
        ellipse at 50% 50%,
        rgba(255, 152, 0, 0.5) 0%,
        rgba(255, 87, 34, 0.3) 30%,
        rgba(0, 0, 0, 0.6) 70%
      );
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5),
                  0 0 20px rgba(255, 152, 0, 0.3);
    }
  }

  .oven-handle {
    position: absolute;
    width: 80px;
    height: 10px;
    bottom: 35px;
    left: 60px;
    background: linear-gradient(180deg, #64748b 0%, #475569 100%);
    border-radius: 5px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.1);
  }

  body.light-mode .oven-handle {
    background: linear-gradient(180deg, #cbd5e1 0%, #94a3b8 100%);
  }

  .heat-wave {
    position: absolute;
    width: 60px;
    height: 4px;
    left: 70px;
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(255, 152, 0, 0.6) 50%,
      transparent 100%
    );
    border-radius: 3px;
    opacity: 0;
    animation: heatRise 2.5s ease-in-out infinite;
    filter: blur(1px);
  }

  .heat-wave:nth-child(5) { bottom: 60px; }
  .heat-wave:nth-child(6) { bottom: 70px; }
  .heat-wave:nth-child(7) { bottom: 80px; }

  @keyframes heatRise {
    0% {
      opacity: 0;
      transform: translateY(0) scaleX(0.8);
      filter: blur(1px);
    }
    20% {
      opacity: 0.8;
      transform: translateY(-8px) scaleX(1);
      filter: blur(1.5px);
    }
    50% {
      opacity: 0.6;
      transform: translateY(-20px) scaleX(1.1);
      filter: blur(2px);
    }
    80% {
      opacity: 0.3;
      transform: translateY(-35px) scaleX(0.9);
      filter: blur(2.5px);
    }
    100% {
      opacity: 0;
      transform: translateY(-45px) scaleX(0.7);
      filter: blur(3px);
    }
  }

  .temp-indicator {
    position: absolute;
    width: 14px;
    height: 14px;
    top: 35px;
    left: 145px;
    background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b);
    border-radius: 50%;
    animation: tempPulse 2s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(231, 76, 60, 0.6);
  }

  @keyframes tempPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 0.6;
      box-shadow: 0 0 10px rgba(231, 76, 60, 0.4);
    }
    50% {
      transform: scale(1.3);
      opacity: 1;
      box-shadow: 0 0 25px rgba(231, 76, 60, 0.9);
    }
  }

  /* ====== 24-Hour PDF Reports Animation ====== */
  .icon-report {
    position: relative;
    width: 220px;
    height: 200px;
  }

  .report-page {
    position: absolute;
    width: 120px;
    height: 160px;
    top: 20px;
    left: 50px;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                -4px 4px 0 rgba(100, 116, 139, 0.2);
  }

  body.light-mode .report-page {
    background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15),
                -4px 4px 0 rgba(100, 116, 139, 0.1);
  }

  .report-header {
    position: absolute;
    width: 80px;
    height: 12px;
    top: 35px;
    left: 70px;
    background: linear-gradient(90deg, #e74c3c, #c0392b);
    border-radius: 2px;
  }

  .report-line {
    position: absolute;
    height: 6px;
    left: 70px;
    background: rgba(100, 116, 139, 0.3);
    border-radius: 3px;
    animation: lineReveal 2s ease-out infinite;
  }

  .report-line.line-1 {
    width: 90px;
    top: 60px;
    animation-delay: 0.2s;
  }

  .report-line.line-2 {
    width: 70px;
    top: 75px;
    animation-delay: 0.4s;
  }

  .report-line.line-3 {
    width: 80px;
    top: 90px;
    animation-delay: 0.6s;
  }

  @keyframes lineReveal {
    0% {
      width: 0;
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0.6;
    }
  }

  .report-photo {
    position: absolute;
    width: 50px;
    height: 40px;
    top: 115px;
    left: 70px;
    background: linear-gradient(135deg, #64748b 0%, #475569 100%);
    border-radius: 4px;
    border: 2px solid rgba(100, 116, 139, 0.3);
  }

  .report-photo::before {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    top: 5px;
    right: 5px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
  }

  .report-checkmark {
    position: absolute;
    width: 36px;
    height: 36px;
    bottom: 35px;
    right: 45px;
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border-radius: 50%;
    box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
    animation: checkPop 2s ease-in-out infinite;
  }

  .report-checkmark::before {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 18px;
    font-weight: bold;
  }

  @keyframes checkPop {
    0%, 100% {
      transform: scale(1);
      opacity: 0.8;
    }
    50% {
      transform: scale(1.1);
      opacity: 1;
      box-shadow: 0 6px 25px rgba(34, 197, 94, 0.6);
    }
  }

  /* Tablet breakpoint */
  @media (max-width: 1024px) {
    .photo-grid {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
  }

  @media (max-width: 768px) {
    .gallery-section {
      padding: 4rem 1rem;
    }

    .gallery-head h2 {
      font-size: clamp(1.75rem, 6vw, 2.5rem);
    }

    .gallery-head p {
      font-size: 1rem;
    }

    .included-header {
      margin-top: 0;
      margin-bottom: 2.5rem;
    }

    .addon-header {
      margin-top: 4rem;
      margin-bottom: 2rem;
    }

    .main-service-card {
      margin-bottom: 3rem;
    }

    .service-card.featured {
      min-height: initial;
    }

    .service-card.featured .photo-label {
      padding: 1.5rem;
    }

    .photo-label.featured-label {
      padding-top: 50% !important;
    }

    .price-amount {
      font-size: 2rem;
    }

    .included-items {
      padding: 1rem;
    }

    .photo-grid {
      grid-template-columns: 1fr;
      gap: 1.25rem;
    }

    .photo-item {
      min-height: 320px;
    }

    .animated-bg {
      min-height: 180px;
    }

    .photo-label {
      padding: 1.5rem;
    }

    .photo-label h3 {
      font-size: 1.2rem;
    }

    .photo-label p {
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* Scale down animations for mobile */
    .icon-interior,
    .icon-exterior,
    .icon-move-in,
    .icon-move-out,
    .icon-buyers,
    .icon-quarterly,
    .icon-hvac,
    .icon-roof,
    .icon-plumbing,
    .icon-appliances,
    .icon-report {
      transform: scale(0.8);
    }
  }

  /* Very small screens */
  @media (max-width: 360px) {
    .gallery-section {
      padding: 3rem 0.75rem;
    }

    .gallery-head h2 {
      font-size: 1.5rem;
    }

    .photo-item {
      min-height: 280px;
    }

    .animated-bg {
      min-height: 150px;
    }

    .photo-label {
      padding: 1.25rem;
    }

    .photo-label h3 {
      font-size: 1.1rem;
    }

    .icon-interior,
    .icon-exterior,
    .icon-move-in,
    .icon-move-out,
    .icon-buyers,
    .icon-quarterly,
    .icon-hvac,
    .icon-roof,
    .icon-plumbing,
    .icon-appliances,
    .icon-report {
      transform: scale(0.7);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .damage-marker,
    .inspection-beam,
    .siding-panel,
    .damage-indicator,
    .inspection-light,
    .door-panel,
    .door-handle,
    .checklist-item,
    .comparison-panel,
    .compare-arrow,
    .magnifying-glass,
    .quarter-marker,
    .fan-blade,
    .air-particle,
    .roof-highlight,
    .rain-drop,
    .faucet-handle,
    .water-drop,
    .water-flow,
    .leak-indicator,
    .oven-window,
    .heat-wave,
    .temp-indicator,
    .report-line,
    .report-checkmark {
      animation: none;
    }
  }

  /* ====== Service Card Expansion Styles ====== */
  .photo-item-wrapper {
    position: relative;
  }

  /* Convert .photo-item to button styles */
  button.photo-item {
    border: none;
    font-family: inherit;
    text-align: left;
    width: 100%;
  }

  .photo-item:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.5);
  }

  .photo-item:focus-visible {
    box-shadow: 0 0 0 3px #e74c3c;
  }

  /* Expand Indicator */
  .expand-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #e74c3c;
    font-weight: 600;
    font-size: 0.9rem;
    margin-top: 0.5rem;
    transition: all 0.3s ease;
  }

  .expand-chevron {
    width: 18px;
    height: 18px;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .photo-item[aria-expanded="true"] .expand-chevron {
    transform: rotate(180deg);
  }

  .photo-item[aria-expanded="true"] .expand-text {
    opacity: 0;
    width: 0;
    overflow: hidden;
  }

  .photo-item:hover .expand-indicator {
    color: #ff6b6b;
  }

  /* Value Proposition Panel */
  .value-prop-panel {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: linear-gradient(135deg,
      rgba(231, 76, 60, 0.08) 0%,
      rgba(100, 116, 139, 0.04) 100%);
    border-radius: 0 0 24px 24px;
    margin-top: -24px;
    position: relative;
    z-index: 5;
  }

  .value-prop-panel:not([hidden]) {
    border-top: 1px solid rgba(231, 76, 60, 0.2);
  }

  body.light-mode .value-prop-panel {
    background: linear-gradient(135deg,
      rgba(231, 76, 60, 0.06) 0%,
      rgba(100, 116, 139, 0.02) 100%);
  }

  .value-prop-content {
    padding: 2rem;
    position: relative;
  }

  /* Headline */
  .value-prop-headline {
    font-size: 1.25rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 1.5rem;
    line-height: 1.3;
  }

  body.light-mode .value-prop-headline {
    color: #1a1a1a;
  }

  /* Benefits List */
  .value-prop-benefits {
    list-style: none;
    padding: 0;
    margin: 0 0 1.5rem 0;
  }

  .value-prop-benefits li {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.5rem 0;
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.95rem;
    line-height: 1.5;
  }

  body.light-mode .value-prop-benefits li {
    color: #4a4a4a;
  }

  .benefit-check {
    width: 20px;
    height: 20px;
    color: #e74c3c;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* Statistic */
  .value-prop-stat {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    background: rgba(231, 76, 60, 0.1);
    border-radius: 12px;
    border-left: 3px solid #e74c3c;
    margin-top: 1rem;
  }

  body.light-mode .value-prop-stat {
    background: rgba(231, 76, 60, 0.08);
  }

  .stat-icon {
    width: 24px;
    height: 24px;
    color: #e74c3c;
    flex-shrink: 0;
  }

  .stat-text {
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.95rem;
  }

  body.light-mode .stat-text {
    color: #1a1a1a;
  }

  /* Expanded State Styling */
  .photo-item-wrapper.expanded .photo-item {
    border-radius: 24px 24px 0 0;
    box-shadow: 0 -4px 30px rgba(231, 76, 60, 0.15);
  }

  .photo-item-wrapper.expanded {
    z-index: 10;
  }

  /* Animation for panel content */
  .value-prop-content > * {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .value-prop-panel:not([hidden]) .value-prop-content > * {
    opacity: 1;
    transform: translateY(0);
  }

  .value-prop-panel:not([hidden]) .value-prop-content > *:nth-child(1) { transition-delay: 0.1s; }
  .value-prop-panel:not([hidden]) .value-prop-content > *:nth-child(2) { transition-delay: 0.15s; }
  .value-prop-panel:not([hidden]) .value-prop-content > *:nth-child(3) { transition-delay: 0.2s; }

  /* Mobile Responsive for value props */
  @media (max-width: 768px) {
    .value-prop-content {
      padding: 1.5rem;
    }

    .value-prop-headline {
      font-size: 1.1rem;
    }

    .value-prop-benefits li {
      font-size: 0.9rem;
    }

    .value-prop-stat {
      padding: 0.875rem 1rem;
    }

    .stat-text {
      font-size: 0.875rem;
    }
  }

  /* Reduced Motion for value props */
  @media (prefers-reduced-motion: reduce) {
    .value-prop-panel,
    .expand-chevron,
    .value-prop-content > * {
      transition: none;
    }
  }
</style>

<script is:inline>
  (function() {
    function initServiceCards() {
      const wrappers = document.querySelectorAll('.photo-item-wrapper');

      wrappers.forEach(function(wrapper) {
        const toggle = wrapper.querySelector('[data-service-toggle]');
        const serviceId = toggle?.getAttribute('data-service-toggle');
        const panel = document.getElementById('value-prop-' + serviceId);

        if (!toggle || !panel) return;

        // Skip if already initialized
        if (toggle.dataset.initialized) return;
        toggle.dataset.initialized = 'true';

        function handleClick(e) {
          e.preventDefault();
          e.stopPropagation();

          const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

          // Close all other panels (accordion behavior)
          document.querySelectorAll('.photo-item-wrapper').forEach(function(otherWrapper) {
            if (otherWrapper !== wrapper) {
              const otherToggle = otherWrapper.querySelector('[data-service-toggle]');
              const otherId = otherToggle?.getAttribute('data-service-toggle');
              const otherPanel = document.getElementById('value-prop-' + otherId);
              if (otherToggle && otherPanel) {
                otherToggle.setAttribute('aria-expanded', 'false');
                otherPanel.hidden = true;
                otherPanel.setAttribute('aria-hidden', 'true');
                otherPanel.style.maxHeight = '0';
                otherWrapper.classList.remove('expanded');
              }
            }
          });

          // Toggle current panel
          if (isExpanded) {
            toggle.setAttribute('aria-expanded', 'false');
            panel.hidden = true;
            panel.setAttribute('aria-hidden', 'true');
            panel.style.maxHeight = '0';
            wrapper.classList.remove('expanded');
          } else {
            toggle.setAttribute('aria-expanded', 'true');
            panel.hidden = false;
            panel.setAttribute('aria-hidden', 'false');
            // Force reflow to get accurate scrollHeight
            panel.offsetHeight;
            panel.style.maxHeight = panel.scrollHeight + 'px';
            wrapper.classList.add('expanded');

            // Smooth scroll into view if needed
            setTimeout(function() {
              wrapper.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 300);
          }
        }

        toggle.addEventListener('click', handleClick);
      });
    }

    // Handle Escape key globally (only add once)
    if (!window._serviceCardsEscapeInit) {
      window._serviceCardsEscapeInit = true;
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          document.querySelectorAll('.photo-item-wrapper').forEach(function(wrapper) {
            const toggle = wrapper.querySelector('[data-service-toggle]');
            const serviceId = toggle?.getAttribute('data-service-toggle');
            const panel = document.getElementById('value-prop-' + serviceId);
            if (toggle && panel && !panel.hidden) {
              toggle.setAttribute('aria-expanded', 'false');
              panel.hidden = true;
              panel.setAttribute('aria-hidden', 'true');
              panel.style.maxHeight = '0';
              wrapper.classList.remove('expanded');
              toggle.focus();
            }
          });
        }
      });
    }

    // Initialize immediately if DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initServiceCards);
    } else {
      initServiceCards();
    }

    // Re-initialize on Astro page transitions
    document.addEventListener('astro:page-load', initServiceCards);
  })();
</script>

